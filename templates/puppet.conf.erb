[main]
  server = <%= @puppetmaster %>
  environment = production
  confdir = /etc/puppet

  vardir=/var/lib/puppet
  ssldir=/var/lib/puppet/ssl
  rundir=/var/run/puppet
  factpath=$vardir/lib/facter
  templatedir=$confdir/templates
  pluginsync = true

[master]
  node_terminus = exec
  external_nodes = /usr/bin/env PUPPET_DASHBOARD_URL=http://localhost:3000 /usr/share/puppet-dashboard/bin/external_node

  environment = production
  manifest    = $confdir/environments/$environment/manifests/site.pp
  modulepath  = $confdir/environments/$environment/modules

  ssl_client_header = SSL_CLIENT_S_DN
  ssl_client_verify_header = SSL_CLIENT_VERIFY
  storeconfigs_backend = puppetdb
  storeconfigs = true

  reports = store, http
  reporturl = http://<%= @puppetmaster %>:3000/reports/upload

[agent]
  report = true
  show_diff = true
  environment = production
  usecacheonfailure = false
  configtimeout = 600
  splay = true
  pluginsync = true
